<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="fraghment/header:: head"></th:block>
    <!-- DataTables -->
    <link rel="stylesheet" type="text/css" th:href="@{/css/jquery-ui1.css}">
    <style>

        input[type="checkbox"] {
            display: none;
        }

        input[type="checkbox"] + label {
            display: block;
            position: relative;
            padding-left: 35px;
            margin-bottom: 20px;
            font: 14px/20px 'Open Sans', Arial, sans-serif;
            color: #000;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        input[type="checkbox"] + label:last-child {
            margin-bottom: 0;
        }

        input[type="checkbox"] + label:before {
            content: '';
            display: block;
            width: 20px;
            height: 20px;
            border: 1px solid #6cc0e5;
            position: absolute;
            left: 0;
            top: 0;
            opacity: .6;
            -webkit-transition: all .12s, border-color .08s;
            transition: all .12s, border-color .08s;
        }

        input[type="checkbox"]:checked + label:before {
            width: 10px;
            top: -5px;
            left: 5px;
            border-radius: 0;
            opacity: 1;
            border: 1px solid green;
            border-top-color: transparent;
            border-left-color: transparent;
            -webkit-transform: rotate(45deg);
            transform: rotate(45deg);
        }

    </style>

</head>
<body>


<header th:if="${#request.isUserInRole('USER')}" th:include="fraghment/user_header"></header>
<header th:unless="${#request.isUserInRole('USER')}" th:include="fraghment/head"></header>


<!-- Products -->
<div class="total-ads main-grid-border">
    <div class="container">
        <ol class="breadcrumb" style="margin-bottom: 5px;">
            <li><a th:href="@{/}">Home</a></li>
            <li><a class="active"
                   th:href="@{'/listOfPostByPostTypeId?postTypeId='+${subCategories.category.postType.id}}"><span
                    th:text="${subCategories.category.postType.name}"></span></a></li>
            <li><a class="active" th:href="@{'/allAdsByCategory?categoryId='+${subCategories.category.id}}"><span
                    th:text="${subCategories.category.name}"></span></a></li>
            <li class="active" th:text="${subCategories.name}">Animals</li>
        </ol>
        <div class="ads-grid">
            <div class="side-bar col-md-3">
                <div class="search-hotel">
                    <h3 class="sear-head">Name contains</h3>
                    <input type="text" placeholder="Name contains..." id="title">
                    <input type="button" value=" " id="titleSearchButton">
                </div>

                <div class="brand-select">
                    <h3 class="sear-head">Brand name</h3>
                    <select class="selectpicker" data-live-search="true" id="manufacturer">
                        <option selected disabled>Choose Brand</option>
                        <option data-tokens="All">All</option>
                        <option data-tokens="Audi">Audi</option>
                        <option data-tokens="Bentley">Bentley</option>
                        <option data-tokens="BMW">BMW</option>
                        <option data-tokens="Chevrolet">Chevrolet</option>
                        <option data-tokens="Ferrari">Ferrari</option>
                        <option data-tokens="Fiat">Fiat</option>
                        <option data-tokens="Force Motors">Force Motors</option>
                        <option data-tokens="Ford">Ford</option>
                        <option data-tokens="Hindustan Motors">Hindustan Motors</option>
                        <option data-tokens="Honda">Honda</option>
                        <option data-tokens="Hyundai">Hyundai</option>
                        <option data-tokens="Samsung">Samsung</option>
                        <option data-tokens="Apple">Apple</option>
                        <option data-tokens="HTC">HTC</option>
                        <option data-tokens="MI">MI</option>
                        <option data-tokens="Other Brands">Other Brands</option>
                    </select>
                </div>
                <div class="brand-select">
                    <h3 class="sear-head">Location</h3>
                    <select class="selectpicker" data-live-search="true" id="location">
                        <option selected disabled>Choose Location</option>
                        <option data-tokens="All">All</option>
                        <option data-tokens="Doha">Doha</option>
                        <option data-tokens="Alkhore">Alkhore</option>
                        <option data-tokens="Najma">Najma</option>
                        <option data-tokens="Alwhakra">Alwhakra</option>

                    </select>
                </div>
                <div class="brand-select">
                    <h3 class="sear-head">Condition</h3>
                    <select class="selectpicker" data-live-search="true" id="condition">
                        <option selected disabled>Choose Condition</option>
                        <option data-tokens="All">All</option>
                        <option data-tokens="Used">Used</option>
                        <option data-tokens="New">New</option>
                        <option data-tokens="Others">Others</option>

                    </select>
                </div>
                <div class="brand-select">
                    <h3 class="sear-head">Number Of Doors</h3>
                    <select class="selectpicker" data-live-search="true" id="numberOfDoors">
                        <option selected disabled>Choose Number Of Doors</option>
                        <option data-tokens="All">All</option>
                        <option data-tokens="1">1</option>
                        <option data-tokens="2">2</option>
                        <option data-tokens="3">3</option>
                        <option data-tokens="4">4</option>


                    </select>
                </div>
                <div class="brand-select">
                    <h3 class="sear-head">Fuel Type</h3>
                    <select class="selectpicker" data-live-search="true" id="fuelType">
                        <option selected disabled>Choose Fuel Type</option>
                        <option data-tokens="All">All</option>
                        <option data-tokens="Petrol">Petrol</option>
                        <option data-tokens="Diesel">Diesel</option>
                        <option data-tokens="Hybrid">Hybrid</option>
                        <option data-tokens="Other">Other</option>


                    </select>
                </div>


                <div class="range">
                    <h3 class="sear-head">Price range</h3>
                    <ul class="dropdown-menu6">
                        <li>

                            <div id="slider-range"></div>
                            <input type="text" id="amount" style="border: 0; color: #ffffff; font-weight: normal;"/>
                            <input type="hidden" id="amountFrom">
                            <input type="hidden" id="amountTo">
                        </li>
                    </ul>
                    <!---->

                </div>
                <!--    <div class="brand-select">
                        <h3 class="sear-head">Body Type</h3>
                        <select class="selectpicker" data-live-search="true">
                            <option data-tokens="All">All</option>
                            <option data-tokens="Sedan">Sedan</option>
                            <option data-tokens="Coupe">Coupe</option>
                            <option data-tokens="Convertible">Convertible</option>
                            <option data-tokens="Estate">Estate</option>
                            <option data-tokens="mpv">mpv</option>
                            <option data-tokens="Other">Other</option>


                        </select>
                    </div>-->
                <div class="brand-select">
                    <h3 class="sear-head">Model</h3>
                    <select class="selectpicker" data-live-search="true" id="model">
                        <option selected disabled>Choose Model</option>
                        <option value="Alfa Romeo">Alfa Romeo</option>
                        <option value="Aston Martin">Aston Martin</option>
                        <option value="Audi">Audi</option>
                        <option value="Baic">Baic</option>
                        <option value="Bently">Bently</option>
                        <option value="BMW">BMW</option>
                        <option value="Cadillac">Cadillac</option>
                        <option value="Chery">Chery</option>
                        <option value="Chevrolet">Chevrolet</option>
                        <option value="Chrysler">Chrysler</option>
                        <option value="Citreon">Citreon</option>
                        <option value="Daihatsu">Daihatsu</option>
                        <option value="Dodge">Dodge</option>
                        <option value="Ferrari">Ferrari</option>
                        <option value="Fiat">Fiat</option>
                        <option value="Ford">Ford</option>
                        <option value="GAC">GAC</option>
                        <option value="Genesis">Genesis</option>
                        <option value="GMC">GMC</option>
                        <option value="Honda">Honda</option>
                        <option value="Hundai">Hundai</option>
                        <option value="Infiniti">Infiniti</option>
                        <option value="Jaguar">Jaguar</option>
                        <option value="Kia">Kia</option>
                        <option value="Lamborghini">Lamborghini</option>
                        <option value="Lexus">Lexus</option>
                        <option value="Lincol">Lincol</option>
                        <option value="Lotus">Lotus</option>
                    </select>
                </div>
                <div class="brand-select">
                    <h3 class="sear-head">Year</h3>
                    <select class="selectpicker" data-live-search="true" id="year">
                        <option selected disabled>Choose Year</option>
                        <option data-tokens="All">All</option>
                        <option data-tokens="2019">2019</option>
                        <option data-tokens="2018">2018</option>
                        <option data-tokens="2017">2017</option>
                        <option data-tokens="2016">2016</option>
                        <option data-tokens="2015">2015</option>
                        <option data-tokens="2014">2014</option>
                        <option data-tokens="2013">2013</option>
                        <option data-tokens="2012">2012</option>
                        <option data-tokens="2011">2011</option>
                        <option data-tokens="2010">2010</option>
                        <option data-tokens="2005-2010">2005-2010</option>
                        <option data-tokens="2000-2005">2000-2005</option>
                        <option data-tokens="Before 2000">Before 2000</option>

                    </select>
                </div>

                <div class="brand-select">
                    <h3 class="sear-head">Color</h3>
                    <select class="selectpicker" data-live-search="true" id="color">
                        <option selected disabled>Choose Color</option>
                        <option data-tokens="All">All</option>
                        <option value="Gold">Gold</option>
                        <option value="Silver">Silver</option>
                        <option value="Black">Black</option>
                        <option value="White">White</option>
                        <option value="Chery">Chery</option>
                        <option value="Blue">Blue</option>
                        <option value="Gray">Gray</option>
                        <option value="Red">Red</option>
                        <option value="Green">Green</option>
                        <option value="Orange">Orange</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="brand-select">
                    <h3 class="sear-head">Transmission</h3>
                    <input type="checkbox" id="box_transmission_All" value="All" checked>
                    <label for="box_transmission_All">Any</label>

                    <input type="checkbox" id="box_transmission_AUTOMATIC" value="AUTOMATIC">
                    <label for="box_transmission_AUTOMATIC">AUTOMATIC</label>

                    <input type="checkbox" id="box_transmission_MANUAL" value="MANUAL">
                    <label for="box_transmission_MANUAL">MANUAL</label>

                    <input type="checkbox" id="box_transmission_OTHER" value="OTHER">
                    <label for="box_transmission_OTHER">OTHER</label>
                </div>

                <div class="range search_button">
                    <button class="btn btn-block serach" id="advancedSearchButton">Search</button>
                </div>

                <div class="featured-ads">
                    <h2 class="sear-head fer">Featured Ads</h2>
                    <div class="featured-ad">
                        <a href="single.html">
                            <div class="featured-ad-left">
                                <img th:src="@{../images/f1.jpg}" title="ad image" alt=""/>
                            </div>
                            <div class="featured-ad-right">
                                <h4>Lorem Ipsum is simply dummy text of the printing industry</h4>
                                <p> 450</p>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="featured-ad">
                        <a href="single.html">
                            <div class="featured-ad-left">
                                <img th:src="@{../images/f2.jpg}" title="ad image" alt=""/>
                            </div>
                            <div class="featured-ad-right">
                                <h4>Lorem Ipsum is simply dummy text of the printing industry</h4>
                                <p> 380</p>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="featured-ad">
                        <a href="single.html">
                            <div class="featured-ad-left">
                                <img th:src="@{../images/f3.jpg}" title="ad image" alt=""/>
                            </div>
                            <div class="featured-ad-right">
                                <h4>Lorem Ipsum is simply dummy text of the printing industry</h4>
                                <p> 560</p>
                            </div>
                            <div class="clearfix"></div>
                        </a>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="ads-display col-md-9">
                <div class="wrapper">
                    <div class="bs-example bs-example-tabs" role="tabpanel" data-example-id="togglable-tabs">
                        <ul id="myTab" class="nav nav-tabs nav-tabs-responsive" role="tablist">
                            <li role="presentation" class="active">
                                <a href="#home" id="home-tab" role="tab" data-toggle="tab" aria-controls="home"
                                   aria-expanded="true">
                                    <span class="text">All Ads</span>
                                </a>
                            </li>
                        </ul>
                        <div id="myTabContent" class="tab-content">
                            <div role="tabpanel" class="tab-pane fade in active" id="home" aria-labelledby="home-tab">
                                <div>
                                    <div id="container">
                                        <div class="view-controls-list" id="viewcontrols">
                                            <label>view :</label>
                                            <a class="gridview active"><i class="glyphicon glyphicon-th"></i></a>
                                            <a class="listview "><i class="glyphicon glyphicon-th-list"></i></a>
                                        </div>
                                        <div class="sort">
                                            <div class="sort-by">
                                                <input type="hidden" id="advanceSearchFlag">
                                                <label>Sort By : </label>
                                                <select id="size">
                                                    <option value="1">1</option>
                                                    <option value="5">5</option>
                                                    <option value="10">10</option>
                                                    <option value="20" selected>20</option>
                                                    <option value="50">50</option>
                                                    <option value="20">100</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="clearfix"></div>
                                        <ul class="grid" id="postList"></ul>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="clearfix"></div>
                            <ul class="pagination pagination-sm" id="pagination"></ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="clearfix"></div>
            <input id="subCategoryId" type="hidden" th:value="${subCategories.id}"/>
        </div>
    </div>
</div>
<div class="trending-ads">
    <div class="container">
        <!-- slider -->
        <div class="trend-ads">
            <h2>Similar Ads</h2>
            <div class="   owl-carousel owl-theme ">

            </div>
        </div>
    </div>
    <!-- //slider -->
</div>
<!-- // Products -->
<!--footer section start-->

<th:block th:include="fraghment/footer"></th:block>

<th:block th:include="fraghment/header :: footer"></th:block>
<script>
    $(document).ready(function () {
        var page = 0;
        var size = 20;
        var subCategory = $('#subCategoryId').val();
        loadPost1(subCategory, page, size);

        $('#model').empty();
        $('#model').selectpicker('refresh');

        $.ajax({
            type: "POST",
            url: "/getManufacturerList",
            data: {
                subcategoryId: subCategory
            },
            success: function (data) {
                let manufacturerToBeSetFor = $('#manufacturer').empty();
                manufacturerToBeSetFor.empty();
                manufacturerToBeSetFor.append('<option selected="true" disabled>Choose Manufacturer</option>');
                manufacturerToBeSetFor.append('<option value="All">All</option>');
                manufacturerToBeSetFor.prop("selectedIndex", 0);

                $.each(data, function (key, entry) {
                    manufacturerToBeSetFor.append($('<option></option>').attr({
                        value: entry.name,
                        'data-content': '<img src=/images/manufacturerImage/' + entry.id + ' style = "width: 20px">' + ' ' + entry.name
                    }));
                });

                manufacturerToBeSetFor.selectpicker('refresh');
            }
        })
    });
</script>

<script>
    $('#manufacturer').on('change', function () {
        $('#model').empty();

        var manufacturerName = $('#' + this.id).val();

        $.ajax({
            type: "POST",
            url: "/getManufacturerModelList",
            data: {
                manufacturerName: manufacturerName
            },
            success: function (data) {
                let manufacturerModelSetFor = $('#model');
                manufacturerModelSetFor.empty();
                manufacturerModelSetFor.append('<option selected="true" disabled>Choose Model</option>');
                manufacturerModelSetFor.append('<option value="All">All</option>');
                manufacturerModelSetFor.prop("selectedIndex", 0);

                $.each(data, function (key, entry) {
                    manufacturerModelSetFor.append($('<option></option>').attr('value', entry.name).text(entry.name));
                });

                manufacturerModelSetFor.selectpicker('refresh');
            }
        })
    });
</script>

<script>
    $(document).ready(function () {
        $('.owl-carousel').owlCarousel({
            loop: false,
            margin: 10,
            nav: true,
            autoplay: true,
            autoplayTimeout: 5000,
            responsive: {
                0: {
                    items: 2
                },
                600: {
                    items: 3
                },
                1000: {
                    items: 4
                }
            }
        })
    });
    owl.on('mousewheel', '.owl-stage', function (e) {
        if (e.deltaY > 0) {
            owl.trigger('next.owl');
        } else {
            owl.trigger('prev.owl');
        }
        e.preventDefault();
    });
</script>
<script type="text/javascript" th:src="@{/js/jquery-ui.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.simplePagination.js}"></script>
<link th:href="@{/css/simplePagination.css}" rel="stylesheet"/>
<script>
    $(document).ready(function () {
        var subcategoryId = $('#subCategoryId').val();
        $.ajax({
            method: "POST",
            url: "/getMaxPriceBySubcategoryId",
            data: {
                subcategoryId: subcategoryId
            },
            success: function (data) {
                $("#slider-range").slider({
                    range: true,
                    min: 0,
                    max: data,
                    values: [0, data / 3],
                    slide: function (event, ui) {
                        $("#amount").val(ui.values[0] + "QR" + " - " + ui.values[1] + "QR");
                        $('#amountFrom').val(ui.values[0]);
                        $('#amountTo').val(ui.values[1]);
                    }
                });
                $("#amount").val($("#slider-range").slider("values", 0) + "QR" + " - " + $("#slider-range").slider("values", 1) + "QR");
            }

        })
    });
</script>

<script th:src="@{/js/tabs.js}"></script>

<script type="text/javascript">
    $(document).ready(function () {
        var elem = $('#container ul');
        $('#viewcontrols a').on('click', function (e) {
            if ($(this).hasClass('gridview')) {
                elem.fadeOut(1000, function () {
                    $('#container ul').removeClass('list').addClass('grid');
                    $('#viewcontrols').removeClass('view-controls-list').addClass('view-controls-grid');
                    $('#viewcontrols .gridview').addClass('active');
                    $('#viewcontrols .listview').removeClass('active');
                    elem.fadeIn(1000);
                });
            } else if ($(this).hasClass('listview')) {
                elem.fadeOut(1000, function () {
                    $('#container ul').removeClass('grid').addClass('list');
                    $('#viewcontrols').removeClass('view-controls-grid').addClass('view-controls-list');
                    $('#viewcontrols .gridview').removeClass('active');
                    $('#viewcontrols .listview').addClass('active');
                    elem.fadeIn(1000);
                });
            }
        });
    });
</script>
<script>
    $('#titleSearchButton').on('click', function () {
        advancedSearch($('#selectSubCategory').val(), $('#title').val(), $('#manufacturer').val(), $('#location').val(), $('#condition').val(), $('#numberOfDoors').val(), $('#fuelType').val(), $('#amountFrom').val(), $('#amountTo').val(), $('#model').val(), $('#year').val(), $('#color').val(), 0, $('#size').val());
        $('#advanceSearchFlag').val(true);
    });
</script>

<script>
    $('#advancedSearchButton').on('click', function () {
        advancedSearch($('#selectSubCategory').val(), $('#title').val(), $('#manufacturer').val(), $('#location').val(), $('#condition').val(), $('#numberOfDoors').val(), $('#fuelType').val(), $('#amountFrom').val(), $('#amountTo').val(), $('#model').val(), $('#year').val(), $('#color').val(), 0, $('#size').val());
        $('#advanceSearchFlag').val(true);
    })
</script>

<script>
    advancedSearch = function (subcategoryId, title, manufacturer, address, condition, numberOfDoors, fuelType, amountFrom, amountTo, model, year, color, page, size) {
        var searchData = {subCategoryId: $('#subCategoryId').val(), page: page, size: size};

        if (title) {
            searchData['title'] = title;
        }

        if (manufacturer) {
            if (manufacturer != 'All') searchData['manufacturer'] = manufacturer;
        }

        if (address) {
            if (address != 'All') searchData['address'] = address;
        }

        if (condition) {
            if (condition != 'All') searchData['condition'] = condition;
        }

        if (numberOfDoors) {
            if (numberOfDoors != 'All') searchData['numberOfDoor'] = numberOfDoors;
        }

        if (fuelType) {
            if (fuelType != 'All') searchData['fuelType'] = fuelType;
        }

        if (amountFrom && amountTo) {
            searchData['priceFrom'] = amountFrom;
            searchData['priceTo'] = amountTo;
        }

        if (model) {
            if (model != 'All') searchData['model'] = model;
        }

        if (year) {
            if (year != 'All') searchData['manufacturYear'] = year;
        }

        if (color) {
            if (color != 'All') searchData['color'] = color;
        }


        if ($('#box_transmission_All:checked').val()) {
        } else if ($('#box_transmission_AUTOMATIC:checked').val()) {
            searchData['transmission'] = $('#box_transmission_AUTOMATIC:checked').val();
        } else if ($('#box_transmission_MANUAL:checked').val()) {
            searchData['transmission'] = $('#box_transmission_MANUAL:checked').val();
        } else if ($('#box_transmission_OTHER:checked').val()) {
            searchData['transmission'] = $('#box_transmission_OTHER:checked').val()
        }

        if (searchData) {
            $.ajax({
                method: "POST",
                url: "/search/searchAllPostByVehicle",
                data: searchData
            })
                .done(function (data) {
                    renderData(data);
                    $('#advanceSearchFlag').val(true);
                    $(function () {
                        $('#pagination').pagination({
                            items: data.totalElements,
                            itemsOnPage: size,
                            cssStyle: 'light-theme',
                            onPageClick: function () {
                                page = $('#pagination').pagination('getCurrentPage') - 1;
                                loadAdvancedSearchPage(subcategoryId, title, manufacturer, address, condition, numberOfDoors, fuelType, amountFrom, amountTo, model, year, color, page, size);
                                $('#advanceSearchFlag').val(true);
                            }
                        });
                    });
                });
        }
    }
</script>


<script>
    loadAdvancedSearchPage = function (subcategoryId, title, manufacturer, address, condition, numberOfDoors, fuelType, amountFrom, amountTo, model, year, color, page, size) {
        var searchData = {subCategoryId: $('#subCategoryId').val(), page: page, size: size};

        if (title) {
            searchData['title'] = title;
        }

        if (manufacturer) {
            if (manufacturer != 'All') searchData['manufacturer'] = manufacturer;
        }

        if (address) {
            if (address != 'All') searchData['address'] = address;
        }

        if (condition) {
            if (condition != 'All') searchData['condition'] = condition;
        }

        if (numberOfDoors) {
            if (numberOfDoors != 'All') searchData['numberOfDoor'] = numberOfDoors;
        }

        if (fuelType) {
            if (fuelType != 'All') searchData['fuelType'] = fuelType;
        }

        if (amountFrom && amountTo) {
            searchData['priceFrom'] = amountFrom;
            searchData['priceTo'] = amountTo;
        }

        if (model) {
            if (model != 'All') searchData['model'] = model;
        }

        if (year) {
            if (year != 'All') searchData['manufacturYear'] = year;
        }

        if (color) {
            if (color != 'All') searchData['color'] = color;
        }


        if ($('#box_transmission_All:checked').val()) {
        } else if ($('#box_transmission_AUTOMATIC:checked').val()) {
            searchData['transmission'] = $('#box_transmission_AUTOMATIC:checked').val();
        } else if ($('#box_transmission_MANUAL:checked').val()) {
            searchData['transmission'] = $('#box_transmission_MANUAL:checked').val();
        } else if ($('#box_transmission_OTHER:checked').val()) {
            searchData['transmission'] = $('#box_transmission_OTHER:checked').val()
        }

        if (searchData) {
            $.ajax({
                method: "POST",
                url: "/search/searchAllPostByVehicle",
                data: searchData
            })
                .done(function (data) {
                    renderData(data);
                });
        }
    }
</script>

<script>
    $(document).ready(
        function () {
            var size = $('#size').val();
            var elem = $('#container ul');
            var subCategory = $('#subCategoryId').val();
            var page = 0;
            loadPost(subCategory, page, size);
        });
</script>
<script>
    $('#size').on('change',
        function () {
            var size = $('#size').val();
            var elem = $('#container ul');
            var subCategory = $('#subCategoryId').val();
            var page = 0;
            if ($('#advanceSearchFlag').val() && $('#advanceSearchFlag').val() == true) {
                advancedSearch($('#title').val(), $('#selectSubCategory').val(), $('#amountFrom').val(), $('#amountTo').val(), 0, $('#size').val());
            } else {
                loadPost(subCategory, page, size);
                $('#advanceSearchFlag').val(false);
            }
        });
</script>
<script>
    loadPost = function (subCategoriesId, page, size) {
        $.ajax({
            method: "POST",
            url: "/allPostBySubCategoryId",
            data: {subCategoriesId: subCategoriesId, page: page, size: size}
        })
            .done(function (data) {
                renderData(data);
                /*$('#pagination').empty();*/
                $(function () {
                    $('#pagination').pagination({
                        items: data.totalElements,
                        itemsOnPage: size,
                        cssStyle: 'light-theme',
                        onPageClick: function () {
                            page = $('#pagination').pagination('getCurrentPage') - 1;
                            loadPage(subCategoriesId, page, size);
                        }
                    });
                });
            });
    };
</script>

<script>
    loadPage = function (subCategoriesId, page, size) {
        $.ajax({
            method: "POST",
            url: "/allPostBySubCategoryId",
            data: {subCategoriesId: subCategoriesId, page: page, size: size}
        })
            .done(function (data) {
                renderData(data);
            });
    };
</script>
<script>
    renderData = function (data) {
        $("#postList").empty();
        $.each(data.content, function (key, entry) {
            /*   console.log(entry.promotedAds,entry.postStatus);*/
            if (entry.promotedAds == true) {

                $('#postList').append(
                    $('<a>').attr({href: '/guest/singlePrduct/view/' + entry.id}).append(
                        $('<li>').append(
                            $('<span>').addClass('fas fa-bookmark premiumad_img')
                        ).append(
                            $('<span>').addClass('price_view').text(entry.price + " QR")
                        ).append(
                            $('<img>').attr({src: "/images/post/" + entry.id + "_0"})
                        ).append(
                            $('<section>').addClass('list-left').append(
                                $('<h5>').addClass('title').text(entry.title)
                            )
                        ).append(
                            $('<section>').addClass('list-right').append(
                                $('<span>').addClass('cityname').text(entry.address)
                            ).append(
                                $('<p>').addClass('date').text(new Date(entry.postCreateTime).toLocaleDateString())
                            ).append(
                                $('<p>').addClass('view_count').append(
                                    $('<i>').addClass('far fa-comment').css('color', 'rgb(146, 41, 41)')
                                ).append(
                                    $('<span>').addClass('count').attr({id: 'comments_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getComment/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#comments_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                ).append(
                                    $('<i>').addClass('fas fa-eye').css('color', 'rgb(9, 113, 178)')
                                ).append(
                                    $('<span>').addClass('view').attr({id: 'view_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getView/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#view_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                ).append(
                                    $('<i>').addClass('far fa-thumbs-up').css('color', 'rgb(43, 109, 103)')
                                ).append(
                                    $('<span>').addClass('like').attr({id: 'like_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getLike/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#like_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                )
                            )
                        ).append(
                            $('<div>').addClass('clearfix')
                        )
                    )
                );
            } else if (entry.postStatus == true) {
                $('#postList').append(
                    $('<a>').attr({href: '/guest/singlePrduct/view/' + entry.id}).append(
                        $('<li>').append(
                            $('<span>').addClass(' sold_item').text('SOLD')
                        ).append(
                            $('<span>').addClass('price_view').text(entry.price + " QR")
                        ).append(
                            $('<img>').attr({src: "/images/post/" + entry.id + "_0"})
                        ).append(
                            $('<section>').addClass('list-left').append(
                                $('<h5>').addClass('title').text(entry.title)
                            )
                        ).append(
                            $('<section>').addClass('list-right').append(
                                $('<span>').addClass('cityname').text(entry.address)
                            ).append(
                                $('<p>').addClass('date').text(new Date(entry.postCreateTime).toLocaleDateString())
                            ).append(
                                $('<p>').addClass('view_count').append(
                                    $('<i>').addClass('far fa-comment').css('color', 'rgb(146, 41, 41)')
                                ).append(
                                    $('<span>').addClass('count').attr({id: 'comments_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getComment/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#comments_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                ).append(
                                    $('<i>').addClass('fas fa-eye').css('color', 'rgb(9, 113, 178)')
                                ).append(
                                    $('<span>').addClass('view').attr({id: 'view_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getView/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#view_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                ).append(
                                    $('<i>').addClass('far fa-thumbs-up').css('color', 'rgb(43, 109, 103)')
                                ).append(
                                    $('<span>').addClass('like').attr({id: 'like_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getLike/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#like_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                )
                            )
                        ).append(
                            $('<div>').addClass('clearfix')
                        )
                    )
                );
            } else {
                $('#postList').append(
                    $('<a>').attr({href: '/guest/singlePrduct/view/' + entry.id}).append(
                        $('<li>').append(
                            $('<span>').addClass('price_view').text(entry.price + " QR")
                        ).append(
                            $('<img>').attr({src: "/images/post/" + entry.id + "_0"})
                        ).append(
                            $('<section>').addClass('list-left').append(
                                $('<h5>').addClass('title').text(entry.title)
                            )
                        ).append(
                            $('<section>').addClass('list-right').append(
                                $('<span>').addClass('cityname').text(entry.address)
                            ).append(
                                $('<p>').addClass('date').text(new Date(entry.postCreateTime).toLocaleDateString())
                            ).append(
                                $('<p>').addClass('view_count').append(
                                    $('<i>').addClass('far fa-comment').css('color', 'rgb(146, 41, 41)')
                                ).append(
                                    $('<span>').addClass('count').attr({id: 'comments_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getComment/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#comments_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                ).append(
                                    $('<i>').addClass('fas fa-eye').css('color', 'rgb(9, 113, 178)')
                                ).append(
                                    $('<span>').addClass('view').attr({id: 'view_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getView/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#view_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                ).append(
                                    $('<i>').addClass('far fa-thumbs-up').css('color', 'rgb(43, 109, 103)')
                                ).append(
                                    $('<span>').addClass('like').attr({id: 'like_count' + entry.id}).css('padding-right', '5px').text(function () {

                                        $.ajax({
                                            url: '/userPost/getLike/' + entry.id,
                                            type: 'GET',
                                            success: function (data) {
                                                $('#like_count' + entry.id).text(data);
                                            }
                                        })
                                    })
                                )
                            )
                        ).append(
                            $('<div>').addClass('clearfix')
                        )
                    )
                );
            }
        });
    }
</script>


<script>
    loadPost1 = function (subCategoriesId, page, size) {
        $.ajax({
            method: "POST",
            url: "/allPostBySubCategoryId",
            async: false,
            data: {subCategoriesId: subCategoriesId, page: page, size: size},
            success: function (data) {
                renderData1(data);
            }
        })
    };
</script>

<script>
    renderData1 = function (data) {

        $(".owl-carousel").empty();
        $.each(data.content, function (key, entry) {
            $('.owl-carousel').append(
                $('<div>').addClass(' item  ').append(
                    $('<div>').addClass(' biseller-column').append(
                        $('<a>').attr({href: '/guest/singlePrduct/view/' + entry.id}).append(
                            $('<img>').attr({src: "/images/post/" + entry.id + "_0"})
                        ).append(
                            $('<span>').addClass('premium_img')
                        ).append(
                            $('<span>').addClass('price').text('QR ' + entry.price)
                        )
                    ).append(
                        $('<div>').addClass('ad-info').append(
                            $('<h5>').text(entry.title)
                        ).append(
                            $('<span>').text(new Date(entry.postCreateTime).toLocaleDateString())
                        )
                    )
                )
            );

        });


    }
</script>
</body>
</html>